/*!
 * jquery fontsize 插件
 * author: xiaolong
 * 20170530
 */
(function(e,r){function n(c){return 1===c.nodeType?(c=c.childNodes,1===c.length&&3===c[0].nodeType||0==c.length?!0:!1):!1}function m(c){c=c.nextSibling;return null===c||c&&3===c.nodeType&&0===e.trim(c.nodeValue).length&&void 0===c.nextSiblings?!0:!1}function p(c){for(var e=c.parentNode.childNodes,l=[],h=0,f=e.length;h<f;h++){if(e[h]==c)return l;l.push(e[h])}}e.fn.fontSize=function(c){function q(b){var a=b.nodeType;if(1===a)if(a=b.childNodes,0==a.length)l(b);else{b=0;for(var d=a.length;b<d;b++)q(a[b])}else 3===a&&l(b)}function l(b){var a=b.nodeType;if(b!=f.content)if(1===a)n(b)&&h(b,1);else if(3===a){a:if(a=!1,m(b)){for(var a=p(b),d=0,c=a.length;d<c;d++)if(3!==a[d].nodeType&&!n(a[d])&&0!=e.trim(e(a[d]).text()).length){a=!1;break a}a=!0}a&&e.trim(b.textContent).length&&h(b,2)}}function h(b,c){var d,a,g,k=f.extendSettings;switch(c){case 1:a=e(b).css("font-size");d=parseInt(a);a=a.substr(a.length-2);b.childNodes&&b.childNodes.length&&("down"==k.action?e(b).css("font-size",d-k.step+a):e(b).css("font-size",d+k.step+a));if(d=m(b))a:{d=p(b);g=0;for(k=d.length;g<k;g++)if(3===d[g].nodeType){d=!0;break a}d=!1}d&&(g=b.parentNode,b.id!=f.content.id&&h(g,1));break;case 2:g=b.parentNode,a=e(g).css("font-size"),d=parseInt(a),a=a.substr(a.length-2),"down"==k.action?e(g).css("font-size",d-k.step+a):e(g).css("font-size",d+k.step+a),g.id!=f.content.id&&g.parentNode.id!==f.content.id&&m(g.parentNode)&&h(g.parentNode,1)}}this.extendSettings=e.extend(!0,{},{action:"up",id:"content",step:2,beforeClick:null,afterClick:null},c);var f=this;f.content=document.getElementById(f.extendSettings.id);this.on("click",function(b){f.extendSettings.beforeClick&&!1===f.extendSettings.beforeClick()||(q(f.content),f.extendSettings.afterClick&&f.extendSettings.afterClick())})}})(jQuery,this);