/*!
 * jquery fontsize 插件
 * author: xiaolong
 * 20170530
 */
(function(c,t){function n(a){return 1===a.nodeType?(a=a.childNodes,1===a.length&&3===a[0].nodeType||0==a.length?!0:!1):!1}function m(a){a=a.nextSibling;return null===a||a&&3===a.nodeType&&0===c.trim(a.nodeValue).length&&void 0===a.nextSiblings?!0:!1}function p(a){a=q(a);for(var c=0,g=a.length;c<g;c++)if(3===a[c].nodeType)return!0;return!1}function q(a){for(var c=a.parentNode.childNodes,g=[],h=0,e=c.length;h<e;h++){if(c[h]==a)return g;g.push(c[h])}}c.fn.fontSize=function(a){function r(b){var a=b.nodeType;if(1===a)if(a=b.childNodes,0==a.length)g(b);else{b=0;for(var c=a.length;b<c;b++)r(a[b])}else 3===a&&g(b)}function g(a){var b=a.nodeType;if(a!=e.content)if(1===b)n(a)&&h(a,1);else if(3===b){a:if(b=!1,m(a)){for(var b=q(a),l=0,d=b.length;l<d;l++)if(3!==b[l].nodeType&&!n(b[l])&&0!=c.trim(c(b[l]).text()).length){b=!1;break a}b=!0}b&&c.trim(a.textContent).length&&h(a,2)}}function h(a,g){var b,d,f,k=e.extendSettings;switch(g){case 1:d=c(a).css("font-size");b=parseInt(d);d=d.substr(d.length-2);a.childNodes&&a.childNodes.length&&("down"==k.action?c(a).css("font-size",b-k.step+d):c(a).css("font-size",b+k.step+d));m(a)&&p(a)&&(f=a.parentNode,a.id!=e.content.id&&h(f,1));break;case 2:f=a.parentNode,d=c(f).css("font-size"),b=parseInt(d),d=d.substr(d.length-2),"down"==k.action?c(f).css("font-size",b-k.step+d):c(f).css("font-size",b+k.step+d),f.id!=e.content.id&&f.parentNode.id!==e.content.id&&m(f.parentNode)&&p(f.parentNode)&&h(f.parentNode,1)}}this.extendSettings=c.extend(!0,{},{action:"up",id:"content",step:2,beforeClick:null,afterClick:null},a);var e=this;e.content=document.getElementById(e.extendSettings.id);this.on("click",function(a){e.extendSettings.beforeClick&&!1===e.extendSettings.beforeClick()||(r(e.content),e.extendSettings.afterClick&&e.extendSettings.afterClick())})}})(jQuery,this);